function Todo(e,t,o,n,a){this.id=e,this.task=t,this.who=o,this.dueDate=n,this.done=!1,this.getLocal=getLocal}function init(){var e=document.getElementById("submit");e.onclick=getFormData;var t=document.getElementById("searchButton");t.onclick=searchList}function addFeature(e){var t=document.getElementById("features"),o=document.createElement("li");o.innerHTML=e,t.appendChild(o)}function addTodosToPage(){for(var e=document.getElementById("todoList"),t=document.createDocumentFragment(),o=0;o<todos.length;o++){var n=todos[o];todosSearch.push(n.task.trim()),todosSearch.push(n.who.trim());var a=createNewTodo(n);e.appendChild(a),t.appendChild(a)}e.appendChild(t)}function addTodoToPage(e){var t=document.getElementById("todoList"),o=createNewTodo(e);t.appendChild(o),todosSearch.push(e.task.trim()),todosSearch.push(e.who.trim()),document.forms[0].reset()}function createNewTodo(e){function t(t){var o=t.target,n=o.getAttribute("class","notDone");"notDone"==n?(o.setAttribute("class","done"),o.innerHTML="&nbsp;&#10004;&nbsp;",e.done=!0,saveTodoItem(e)):(o.setAttribute("class","notDone"),o.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",e.done=!1,saveTodoItem(e))}getTodoLocation(),noLocal=e.getLocal,void 0==noLocal&&(e.getLocal="(No Location Found)"),noDays=s,void 0==noDays&&(s="(Not Found)");var o=Date.parse(e.dueDate),n=new Date(o).toLocaleDateString(),a=new Date,r=o-a.getTime(),d=Math.floor(r/1e3/60/60/24);if(d==d)var s="(Due Today)";if(d>0)var s="("+d+" Days Left)";if(0>d){d=Math.abs(d);var s="(Overdue by "+d+" days)"}var c=document.createElement("li");c.setAttribute("id",e.id);var i=document.createElement("span");i.innerHTML=e.getLocal+" "+e.who+" needs to "+e.task+" by "+n+" "+s;var l=document.createElement("span");e.done?(l.setAttribute("class","done"),l.innerHTML="&nbsp;&#10004;&nbsp;"):(l.setAttribute("class","notDone"),l.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");var u=document.createElement("span");return u.setAttribute("class","delete"),u.innerHTML="&nbsp;&#10007;&nbsp;",u.onclick=deleteItem,l.onclick=t,c.appendChild(l),c.appendChild(i),c.appendChild(u),c}function getFormData(){var e=document.getElementById("task").value;if(!checkInputText(e,"Please enter a task")){var t=document.getElementById("who").value;if(!checkInputText(t,"Please enter a person to do the task")){var o=document.getElementById("dueDate").value;if(!checkInputText(o,"Please enter a due date")){getLocal=geoLocation;var n=Date.parse(o);try{if(isNaN(n))throw new Error("Date format error. Please enter the date in the format MM/DD/YYYY, YYYY/MM/DD, or January 1, 2015");var a=(new Date).getTime(),r=new Todo(a,e,t,o,getLocal);todos.push(r),addTodoToPage(r),saveTodoItem(r)}catch(d){alert(d.message)}}}}}function checkInputText(e,t){return null==e||""==e?(alert(t),!0):!1}function saveTodoItem(e){if(localStorage){var t="todo"+e.id,o=JSON.stringify(e);localStorage.setItem(t,o)}else console.log("Error: you don't have localStorage!")}function deleteItem(e){var t=e.target,o=t.parentElement.id,n="todo"+o;localStorage.removeItem(n);for(var a=0;a<todos.length;a++)if(todos[a].id==o){todos.splice(a,1);break}var r=e.target.parentElement,d=document.getElementById("todoList");d.removeChild(r)}function searchList(){var e=document.getElementById("searchTodo").value;e=e.trim();var t=todosSearch.join();if(null==e||""==e)return void alert("Please enter a task or name to search for");var o="\\b"+e+"\\b",n=new RegExp(o,"ig"),a=t.match(n);if(null==a||""==a){var r=document.getElementById("taskResults");clearResultsList(r);var d=document.createDocumentFragment(),s=document.createElement("li");s.innerHTML="No match found",d.appendChild(s),r.appendChild(d)}else showResults(a)}function clearResultsList(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function showResults(e){var t=document.getElementById("taskResults");clearResultsList(t);var o=document.createDocumentFragment(),n=document.createElement("li");n.innerHTML='"'+e[0]+'"',o.appendChild(n);for(var a=0;a<todos.length;a++){var r=todos[a];"ice"==e[0]&&(n.innerHTML+="<br /> Todo Item: "+r.who+" needs to "+r.task+" by "+r.dueDate)}t.appendChild(o)}var todos=new Array,todosSearch=new Array,map=null;